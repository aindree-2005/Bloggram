import{r as o,a8 as E,m as L,n as C,j as i,a9 as P,ax as s,P as j}from"./index-cd888a92.js";import{a as m}from"./BlogModel-dc40cd48.js";import{B as D}from"./BlogSections-49c0b348.js";import"./Chip-de9cdbea.js";const y=()=>{const[h,d]=o.useState(!0),[S,c]=o.useState(!1),[e,r]=o.useState({title:"",desc:"",tags:[],content:[]}),[l,p]=o.useState(null),{id:u}=E(),B=L(),F=t=>{r({...e,content:t})},x=t=>{r({...e,[t.target.name]:t.target.value})},I=t=>{var f;if(e.type==="PUBLISHED"){if(e.title===""){s.error("Fill in the title");return}if(e.desc===""){s.error("Fill in the Description");return}if(e.content===""){s.error("Fill in the Content");return}if(((f=e==null?void 0:e.tags)==null?void 0:f.length)===0){s.error("Fill in the tags");return}}c(!0);const n=localStorage.getItem(`${j}UserId`);let a=new FormData;l&&a.append("image",l),a.append("userId",n),a.append("title",e.title),a.append("desc",e.desc),a.append("content",e.content),e.tags.length!==0&&a.append("tags",JSON.stringify(e.tags)),a.append("type",t),m.putFormData(a,`blog/${e._id}`).then(g=>{g.status==="200"?s.success(g.message):s.error(g.message)}),c(!1),B("/dashboard")};return o.useEffect(()=>{const t=new AbortController;return m.getSingle(u,t.signal).then(n=>{n.status==="200"&&(r(n.message),p(`${C}/blog/image/${n.message._id}`)),d(!1)}),()=>{t.abort()}},[u]),h?i.jsx(P,{}):i.jsx(i.Fragment,{children:i.jsx(D,{blog:e,setBlog:r,file:l,setFile:p,handleInputs:x,defaultValue:e.content,handleChange:F,loading:S,handleBlog:I})})};export{y as default};

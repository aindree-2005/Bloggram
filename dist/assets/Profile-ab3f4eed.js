import{m as j,a8 as g,r as o,ac as b,j as e,B as r,C as m,o as u,n as N,T as i,P as v,q as C}from"./index-cd888a92.js";import{c as y,a as E}from"./convertDate-adbe64fe.js";import{u as B,c as P,D as S,B as w}from"./CustomBlogList-1820c68e.js";import{a as A}from"./BlogModel-dc40cd48.js";import{A as D}from"./CustomStylings-f5fa00b3.js";import"./Chip-de9cdbea.js";const I=()=>{const x=j(),{name:l}=g(),[a,h]=o.useState({_id:"",name:"",desc:"",date:"",email:""}),p=(s,t)=>{E.getSingle(s,t,"by-uname").then(n=>{n.status==="200"&&h(n.message)})};o.useEffect(()=>{const s=new AbortController;return p(l,s.signal),()=>{s.abort()}},[]);const c=b(s=>s.published),d=B();return o.useEffect(()=>{const s=new AbortController;return A.getSingle(l,s.signal,"by-uname-published").then(t=>{var n;t.status==="200"&&d(P((n=t==null?void 0:t.message)==null?void 0:n.filter(f=>f.type!=="DRAFT")))}),()=>s.abort()},[d]),e.jsx("section",{className:"container pt-5",children:e.jsxs(r,{className:"row",children:[e.jsx(r,{className:"col-md-4",children:e.jsx(m,{children:e.jsxs(u,{children:[e.jsx(r,{className:"w-100 d-flex justify-content-center",children:e.jsx(D,{src:`${N}/user/image/${a._id}`,sx:{width:80,height:80},onError:s=>{s.target.onerror=null,s.target.src=S}})}),e.jsxs(r,{className:"d-flex flex-column",sx:{gap:"0.5rem"},children:[e.jsx(i,{variant:"h6",children:a.name}),a.desc&&e.jsx(i,{variant:"subtitle1",children:a.desc}),e.jsxs(r,{className:"d-flex justify-content-between",children:[e.jsx(i,{variant:"subtitle2",className:"text-muted",children:a.email}),e.jsx(i,{variant:"subtitle2",className:"text-muted",children:a.bio}),e.jsxs(i,{variant:"subtitle2",className:"text-muted",children:["Joined ",y(a.date)]})]})]}),localStorage.getItem(`${v}Token`)&&e.jsx(C,{fullWidth:!0,variant:"outlined",sx:{mt:2},onClick:()=>x(`/profile/${l}/edit`),children:"Edit Profile"})]})})}),e.jsx(r,{className:"col-md-8",children:c.length!==0?c.map((s,t)=>e.jsx(w,{blog:s},t)):e.jsx(m,{children:e.jsx(u,{children:e.jsx(i,{children:"No blogs published yet !"})})})})]})})};export{I as default};
